var map;
var marker = [];
var infoWindow = [];
var markerData = [ // ?}?[?J?[? ??????E??x?E?o?x
  {
       name: '[store_name]<br>Matsumoto-Castle,<br>[MaskVolume]:<br>little,<br>[Update time]<br>2020.03/15_20:58',
       lat: 36.238822,
        lng: 137.969445,
        icon: 'tam.png' // TAM ??????}?[?J?[?????C???[?W???X????
// }, {
//        name: 'SecondStore',
//     lat: 35.6951212,
//        lng: 139.76610649999998
// }, {
//        name: 'ThirdStore',
//     lat: 35.69496,
//      lng: 139.76746000000003
// }, {
//        name: 'Otyanomizu',
//        lat: 35.6993529,
//        lng: 139.76526949999993
// }, {
//        name: 'ZInboTYO',
//     lat: 35.695932,
//     lng: 139.75762699999996
// }, {
//        name: 'SHINOTYANOMIZU',
//       lat: 35.696932,
//     lng: 139.76543200000003
 }
];
 
function initMap() {
 // ?n?}???
    var mapLatLng = new google.maps.LatLng({lat: markerData[0]['lat'], lng: markerData[0]['lng']}); // ??x?o?x??f?[?^??
   map = new google.maps.Map(document.getElementById('sample'), { // #sample??n?}? ????
     center: mapLatLng, // ?n?}????S???w??
      zoom: 15 // ?n?}??Y?[?????w??
   });
 
 // ?}?[?J?[???????
 for (var i = 0; i < markerData.length; i++) {
        markerLatLng = new google.maps.LatLng({lat: markerData[i]['lat'], lng: markerData[i]['lng']}); // ??x?o?x??f?[?^??
        marker[i] = new google.maps.Marker({ // ?}?[?J?[????
         position: markerLatLng, // ?}?[?J?[? ???u???w??
            map: map // ?}?[?J?[? ??n?}???w??
       });
 
     infoWindow[i] = new google.maps.InfoWindow({ // ?????o??????
         content: '<div class="sample">' + markerData[i]['name'] + '</div>' // ?????o????\????????e
       });
 
     markerEvent(i); // ?}?[?J?[??N???b?N?C?x???g????
 }
 
   marker[0].setOptions({// TAM ??????}?[?J?[??I?v?V???????
        icon: {
         url: markerData[0]['icon']// ?}?[?J?[??????X
       }
   });
}
 
// ?}?[?J?[??N???b?N?C?x???g????
function markerEvent(i) {
    marker[i].addListener('click', function() { // ?}?[?J?[???N???b?N???????
      infoWindow[i].open(map, marker[i]); // ?????o????\??
  });
}
